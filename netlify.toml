[build]
  command = "pnpm install --frozen-lockfile && pnpm run prisma:generate && pnpm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "20"
  PNPM_VERSION = "9"
  # Desabilita smart detection para Firebase API Key (pública por natureza)
  SECRETS_SCAN_SMART_DETECTION_ENABLED = "false"

# Headers definidos em public/_headers

# Redirects básicos
[[redirects]]
  from = "/health"
  to = "/api/health"
  status = 200

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
